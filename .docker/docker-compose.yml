version: '3'
networks:
  default:
    name: some-network
    external: true

services:
  nodejs:
    container_name: marketplace-api
    build:
      context: ./nodejs
    environment:
      - VIRTUAL_HOST=marketplace-api.localhost
      - VIRTUAL_PORT=3000
      - USR_DB_CONN=mongodb://usr:pass@host:27017/?authSource=admin
      - USR_DB_NAME=marketplace-api
      - USR_PASSWORD_KEY=loremipsum
      - USR_JWT_SECRET=ca0eb9e4f0a5df3a9c7d266ef15b10c8
    volumes:
      - '../:/usr/src/app'
    command: npm run dev
